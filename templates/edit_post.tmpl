<html>
<head>
    <title> New post</title>
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="https://unpkg.com/marked@0.3.6"></script>
  <script src="https://unpkg.com/vue/dist/vue.js"></script>

  <style>

</style>

</head>
<body>
  <h1>
  Edit post
  </h1>
  <div id="editor">
  <form action="/admin/update" method="post" class="pure-form">
    <label for="title">Title</label>
    <input type="text" name="title" value="{{ .title }}">
    
    <label for="body">Body:</label>
    <textarea :value="input" @input="update" id="markdown" class="pure-input-1-2" placeholder="Textareas work too" name="body">{{ .markdown }}</textarea>
    
    <label for="slug">Slug: </label>  
    <input type="text" class="pure-input-1-2" value="{{ .slug}}" name="slug">
        
    </fieldset>
    <br><br>
    <input type="hidden" name="id" value="{{ .id}}">
    <button type="submit" class="pure-button pure-button-primary">Submit</button>
  </form> 

  <div v-html="compiledMarkdown"></div>
</div>
  
</body>
<script>
new Vue({
  el: '#editor',
  data: {
    input: document.getElementById("markdown").value
  },
  computed: {
    compiledMarkdown: function () {
      return marked(this.input, { sanitize: true })
    }
  },
  methods: {
    update: _.debounce(function (e) {
      this.input = e.target.value
    }, 300)
  }
})
</script>
</html>